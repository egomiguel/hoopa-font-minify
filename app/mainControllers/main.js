"use strict";angular.module("myApp.Main",["ngRoute"]).controller("MainCtrl",["$rootScope","$scope","$window","$translate",function(t,e,r,o){e.baseUrl="http://localhost/hoopa-front/app/#!/",e.languageShort="English",t.avatar="",t.customGoTo=function(t){r.location.href=e.baseUrl+t},t.searchFilterText="",t.displayAlert=function(t,e){$.notify({message:e},{type:t,delay:4e3,offset:{y:100,x:20}})},e.setLanguage=function(t){switch(t){case"cn_CN":e.languageShort="中文";break;case"en_EN":e.languageShort="English";break;case"es_ES":e.languageShort="Español"}o.use(t)},t.shopCartArray=[],e.offersArray=[],t.shopCartCount=0,t.offersCartCount=0,t.initWishList=function(){var r=AV.User.current();if(r){t.loginUser=!0;var o=new AV.Query("ShopCar");o.equalTo("user",r),o.include("image"),o.include("project"),o.count().then(e=>{t.shopCartCount=e}),o.limit(4),o.descending("createdAt"),o.find().then(t=>{e.shopCartArray=t,e.$apply()})}},e.logout=function(){AV.User.logOut(),t.getUser()},t.loginUser=!1,t.getUser=function(){var e=AV.User.current();e?(""!=e.get("avatarUrl")&&(t.avatar=e.get("avatarUrl")),t.loginUser=!0):t.loginUser=!1},t.getUser(),t.initWishList(),e.goToWishList=function(){t.customGoTo("wishlist")},e.search=function(e){t.searchFilterText=e,t.customGoTo("projects"),t.$broadcast("searchTextUpdated")},e.goToProject=function(e){t.customGoTo("project-details/"+e)},t.initOffersList=function(){var t=AV.User.current(),r=new AV.Query("Offert");r.equalTo("user",t),r.include("project"),r.count().then(t=>{rootScope.offersCartCount=t}),r.limit(4),r.find().then(function(t){e.offersArray=t,e.$apply()})},t.initOffersList()}]);